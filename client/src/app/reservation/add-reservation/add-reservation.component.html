<mat-card>
  <mat-card-title>add reservation</mat-card-title>
  <mat-card-content>
    <form [formGroup]="reservation" (ngSubmit)='onSubmit()'>

      <mat-form-field>
        <input
          matInput
          aria-label="First Name"
          placeholder="First Name"
          type="text"
          formControlName="firstName"
          required
        />
        <mat-error
          *ngIf="reservation.get('firstName')['errors'] && 
          reservation.get('firstName').touched"
        >
          {{ getErrorMessage(reservation.get('firstName')['errors']) }}
        </mat-error>
      </mat-form-field>
      <mat-form-field>
        <input
          matInput
          aria-label="Last Name"
          placeholder="Last Name"
          type="text"
          formControlName="lastName"
          required
        />
        <mat-error
          *ngIf="reservation.get('lastName')['errors'] && 
          reservation.get('lastName').touched"
        >
          {{ getErrorMessage(reservation.get('lastName')['errors']) }}
        </mat-error>
      </mat-form-field>
      <br>

      <mat-form-field>
        <input
          matInput
          aria-label="Email"
          placeholder="Email"
          type="text"
          formControlName="email"
          required
        />
        <mat-error
          *ngIf="reservation.get('email')['errors'] && 
          reservation.get('email').touched"
        >
          {{ getErrorMessage(reservation.get('email')['errors']) }}
        </mat-error>
      </mat-form-field>
      <mat-form-field>
        <input
          matInput
          aria-label="Phone Number"
          placeholder="Phone Number"
          type="text"
          formControlName="phoneNumber"
          required
        />
        <mat-error
          *ngIf="reservation.get('phoneNumber')['errors'] && 
          reservation.get('phoneNumber').touched"
        >
          {{ getErrorMessage(reservation.get('phoneNumber')['errors']) }}
        </mat-error>
      </mat-form-field>

      <div 
        formArrayName="services"
        *ngFor="let item of reservation.get('services')['controls']; let i = index">
        <div [formGroupName]="i">
          <mat-form-field> 
            <mat-select placeholder="Service" aria-label="Service"
              formControlName="name"
              required>
              <mat-option *ngFor="let name of serviceNames" [value]="name">
                {{ name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>

      <div 
        formArrayName="services"
        *ngFor="let item of reservation.get('services')['controls']; let i = index">
        <div [formGroupName]="i">
          <mat-form-field> 
            <mat-select placeholder="Service" aria-label="Service"
              formControlName="name"
              required>
              <mat-option *ngFor="let name of serviceNames" [value]="name">
                {{ name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
      
      <mat-form-field appearance="fill">
        <mat-label>Remarks</mat-label>
        <textarea
          matInput 
          aria-label="Remarks" 
          placeholder="Ex. I would like to color my hair blue..."
          formControlName="remarks"
          >
        </textarea>
        <mat-error
          *ngIf="reservation.get('remarks')['errors'] && 
          reservation.get('remarks').touched"
        >
          {{ getErrorMessage(reservation.get('remarks')['errors']) }}
        </mat-error>
      </mat-form-field>

      <br>
      <mat-form-field appearance="fill">
        <mat-label>Choose a date and time</mat-label>
        <input
          matInput 
          type="datetime-local" 
          aria-label="Date" 
          formControlName="date"
          >
        <mat-datepicker #picker></mat-datepicker>
        <mat-error
        *ngIf="reservation.get('date')['errors'] && 
        reservation.get('date').touched"
      >
        {{ getErrorMessage(reservation.get('date')['errors']) }}
      </mat-error>
      </mat-form-field>
      <br>
      <button type='submit' mat-raised-button
      [disabled]='!reservation.valid'>
        add reservation
      </button>
    </form>
  </mat-card-content>
</mat-card>
REMOVE {{ reservation.get('firstName')['errors'] | json }}
REMOVE {{ reservation.get('lastName')['errors'] | json }}
REMOVE {{ reservation.get('email')['errors'] | json }}
REMOVE {{ reservation.get('phoneNumber')['errors'] | json }}
REMOVE {{ reservation.get('email')['errors'] | json }}
REMOVE {{ reservation.get('remarks')['errors'] | json }}
